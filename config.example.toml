# GlowBridge configuration (TOML)
#
# You can use either:
#   1) Legacy single-strip config: [wled] + [layout]
#   2) Multi-strip config: strips = [ { ... }, { ... } ]
#
# In multi-strip mode, each strip can:
#   - output to multiple WLED instances (targets = [{ip,port}, ...])
#   - enable only some sides by setting that side's LED count to 0
#
# Tip: WLED must have "Realtime" enabled (it is by default).

lock_path = "/tmp/glowbridge.lock"

[video]
device = "auto"
cap_w = 640
cap_h = 480
cap_fps = 30

[sampling]
sample_w = 160
sample_h = 90
edge_margin = 6
patch_r = 2

[effects]
out_fps = 30
smooth_alpha = 0.70
max_step_per_frame = 128
black_luma_threshold = 12
black_chroma_threshold = 10
scene_cut_luma_jump = 20
scene_cut_boost_mult = 3.0
sat_boost = 1.35
val_boost = 1.05

# -------------------------
# Multi-strip output
# -------------------------
# Each entry is a "strip" definition.
# right/top/left/bottom = LED counts per side. Set any side to 0 to disable it.

# Example: mirror to two WLED devices
[layout]
strips = [
  { name="tv", timeout_seconds=2, right=12, top=22, left=12, bottom=22, targets=[ { ip="192.168.1.50" } ] },

  # Example: second strip using only bottom+left, sending to one WLED
  { name="shelf", timeout_seconds=2, right=0, top=0, left=15, bottom=25, targets=[ { ip="192.168.1.51", port=21324 } ] }
]